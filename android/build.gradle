// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
  repositories {
    google()
    mavenCentral()
  }
  dependencies {
    // ✅ Google Services for Firebase
    classpath 'com.google.gms:google-services:4.4.1'
    
    // ✅ Standard React Native dependencies
    classpath('com.android.tools.build:gradle')
    classpath('com.facebook.react:react-native-gradle-plugin')
    classpath('org.jetbrains.kotlin:kotlin-gradle-plugin')
    
    // ❌ REMOVED: classpath for expo-updates-gradle-plugin
    // Not needed - expo-updates is configured via manifestPlaceholders instead
  }
}

allprojects {
  repositories {
    google()
    mavenCentral()
    maven { url = uri('https://www.jitpack.io') }
  }
}

// ✅ Expo plugins for bare workflow
apply plugin: "expo-root-project"
apply plugin: "com.facebook.react.rootproject"

/*
 * ✅ EXPO UPDATES CONFIGURATION METHOD FOR BARE WORKFLOW:
 * 
 * In bare workflow Expo apps, expo-updates is NOT configured via a Gradle plugin.
 * Instead, it's configured through:
 * 
 * 1. manifestPlaceholders in app/build.gradle (✓ Done)
 * 2. Meta-data tags in AndroidManifest.xml (⚠️ Required)
 * 
 * The expo-updates package is autolinked through expo-modules-core,
 * so no additional classpath or plugin is needed here.
 * 
 * Configuration values are passed via manifestPlaceholders:
 * - EXPO_UPDATES_URL
 * - EXPO_UPDATES_CHANNEL  
 * - EXPO_UPDATES_RUNTIME_VERSION
 * - EXPO_UPDATES_ENABLED
 * - EXPO_UPDATES_CHECK_ON_LAUNCH
 * 
 * These are then read by expo-updates at runtime through AndroidManifest.xml.
 */